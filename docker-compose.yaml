version: '3.8'
services:
  qbits-ui:
    build:
      context: .   # build from repository root
      dockerfile: Dockerfile
    environment:
      - NODE_ENV=production
    networks:
      - coolify
    # labels:
    #   - "traefik.enable=true"
    #   - "traefik.http.routers.qbits-ui.rule=Host(`ui.qbits4dev.com`)"
    #   - "traefik.http.routers.qbits-ui.entrypoints=https"
    #   - "traefik.http.routers.qbits-ui.tls.certresolver=letsencrypt"
    #   - "traefik.http.routers.qbits-ui.priority=100"
    #   - "traefik.http.services.qbits-ui.loadbalancer.server.port=80"
    #   - "traefik.docker.network=coolify"
    #   - "coolify.managed=true"
    #   - "coolify.proxy=true"
    healthcheck:
      test: ["CMD", "wget", "--spider", "-q", "http://localhost/"]
      interval: 30s
      timeout: 5s
      retries: 3

networks:
  coolify:
    external: true
